<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sudes Nest - Qu·∫£n l√Ω s·∫£n ph·∫©m</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header>
        <div class="header-top">
            <div class="top-left">
                <span class="icon">üîî</span>
                <span>Khuy·∫øn m√£i</span>
                <span class="text-top">30/4-1/5 h·∫•p d·∫´n nh·∫•t m√πa h√® n√†y</span>
                <span>KH√îNG TH·ªÇ B·ªé L·ª†</span>
            </div>
            <div class="top-right">
                <div class="icon-right">üí¨</div>
                <div class="top-right-text">
                    <h2>T∆∞ v·∫•n kh√°ch h√†ng</h2>
                    <p>1900 6750</p>
                </div>
            </div>
        </div>

        <div class="header-center">
            <div class="header-center-left">
                <div class="logo">
                    <div class="logo-text">
                        <h2>SUDES NEST</h2>
                        <p>Y·∫øn s√†o Kh√°nh H√≤a cao c·∫•p</p>
                    </div>
                    <div class="logo-image">
                        <img src="logo.jfif" alt="Logo">
                    </div>
                </div>
            </div>

            <div class="header-center-center">
                <div class="search">
                    <div class="search-bar">
                        <input type="text" id="search-input" placeholder="T√¨m ki·∫øm s·∫£n ph·∫©m..." oninput="handleSearch()">
                    </div>
                    <div class="search-btn">
                        <button>üîç</button>
                    </div>
                </div>
            </div>

            <div class="header-center-right">
                <div class="menu-top">
                    <div class="menu-top-item">
                        <a href="#">üìç <span>C·ª≠a h√†ng</span></a>
                    </div>
                    <div class="menu-top-item">
                        <a href="#">ü§ç <span>Y√™u th√≠ch</span></a>
                        <span class="badge">0</span>
                    </div>
                    <div class="menu-top-item">
                        <a href="acc.html">üôç‚Äç‚ôÇÔ∏è <span>T√†i kho·∫£n</span></a>
                    </div>
                    <div class="menu-top-item">
                        <a href="#">üõí <span>Gi·ªè h√†ng</span></a>
                        <span class="badge">0</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="header-bottom">
            <div class="menu-left">
                <form class="dropdown">
                    <select>
                        <option value="1">‚â° DANH M·ª§C S·∫¢N PH·∫®M</option>
                    </select>
                </form>
            </div>
            <div class="menu-center">
                <nav class="menu-item"><a href="#">Trang ch·ªß</a></nav>
                <nav class="menu-item"><a href="#">Gi·ªõi thi·ªáu</a></nav>
                <nav class="category"><a href="#">S·∫£n Ph·∫©m</a></nav>
                <nav class="menu-item"><a href="#">Tin t·ª©c</a></nav>
                <nav class="menu-item"><a href="#">Li√™n h·ªá</a></nav>
            </div>
            <div class="menu-right">
                <div class="hotdeal-section">
                    <button>Hot deal</button>
                    <span class="hotdeal-badge">%</span>
                </div>
            </div>
        </div>
    </header>

    <main>
        <div class="main-image">
            <img src="9c268519-d5b7-4d10-8c64-4b575dba5fb3.jfif" class="slide active" alt="Banner 1">
            <img src="b68c04df-f82d-444f-ba75-101a6334adf7.jfif" class="slide" alt="Banner 2">
        </div>

        <div class="crud-container">
            <div class="crud-card">
                <h3 class="crud-title">üõ†Ô∏è QU·∫¢N L√ù KHO Y·∫æN S√ÄO</h3>
                
                <div class="crud-form">
                    <input type="hidden" id="crud-id">
                    <input type="text" id="crud-name" placeholder="T√™n lo·∫°i y·∫øn...">
                    <input type="number" id="crud-price" placeholder="Gi√° ti·ªÅn (VNƒê)...">
                    <div class="crud-btns">
                        <button id="btn-save" onclick="handleSave()">L∆ØU S·∫¢N PH·∫®M</button>
                        <button id="btn-clear" onclick="clearForm()" style="background:#666; color:white; border:none; padding:10px 20px; border-radius:4px; cursor:pointer;">H·ª¶Y</button>
                    </div>
                </div>

                <div class="crud-table-wrapper">
                    <table class="crud-table">
                        <thead>
                            <tr>
                                <th>STT</th>
                                <th>T√™n S·∫£n Ph·∫©m</th>
                                <th>Gi√° Ni√™m Y·∫øt</th>
                                <th>Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody id="crud-table-body">
                            </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <script>
        const STORAGE_KEY = "SUDES_NEST_PRODUCTS";

        // 1. H√†m v·∫Ω b·∫£ng (Hi·ªÉn th·ªã d·ªØ li·ªáu)
        function renderTable(productsToDisplay) {
            const body = document.getElementById('crud-table-body');
            if (productsToDisplay.length === 0) {
                body.innerHTML = '<tr><td colspan="4" style="text-align:center;">Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m n√†o</td></tr>';
                return;
            }

            body.innerHTML = productsToDisplay.map((p, index) => `
                <tr>
                    <td>${index + 1}</td>
                    <td>${p.name}</td>
                    <td>${Number(p.price).toLocaleString()}ƒë</td>
                    <td>
                        <button class="btn-edit-tool" onclick="editProduct(${index})" style="color: blue; cursor:pointer; margin-right:10px; border:none; background:none;">S·ª≠a</button>
                        <button class="btn-delete-tool" onclick="deleteProduct(${index})" style="color: red; cursor:pointer; border:none; background:none;">X√≥a</button>
                    </td>
                </tr>
            `).join('');
        }

        // 2. T·∫£i d·ªØ li·ªáu ban ƒë·∫ßu
        function loadProducts() {
            const products = JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]");
            renderTable(products);
        }

        // 3. CH·ª®C NƒÇNG T√åM KI·∫æM (Search)
        function handleSearch() {
            const keyword = document.getElementById('search-input').value.toLowerCase();
            const products = JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]");
            const filtered = products.filter(p => p.name.toLowerCase().includes(keyword));
            renderTable(filtered);
        }

        // 4. CH·ª®C NƒÇNG L∆ØU (Create & Update + Ki·ªÉm th·ª≠ bi√™n)
        function handleSave() {
            const id = document.getElementById('crud-id').value; 
            const name = document.getElementById('crud-name').value.trim();
            const price = parseFloat(document.getElementById('crud-price').value);

            // Ki·ªÉm th·ª≠ l·ªõp t∆∞∆°ng ƒë∆∞∆°ng & Gi√° tr·ªã bi√™n
            if (!name || isNaN(price)) {
                return alert("Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß T√™n v√† Gi√°!");
            }
            if (price <= 0) {
                return alert("L·ªói: Gi√° s·∫£n ph·∫©m ph·∫£i l·ªõn h∆°n 0!");
            }
            if (price > 100000000) {
                return alert("L·ªói: Gi√° v∆∞·ª£t qu√° gi·ªõi h·∫°n cho ph√©p (100 tri·ªáu)!");
            }

            let products = JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]");

            if (id !== "") {
                // Ch·∫ø ƒë·ªô S·ª≠a (Update)
                products[id] = { name, price };
                alert("C·∫≠p nh·∫≠t th√†nh c√¥ng!");
            } else {
                // Ch·∫ø ƒë·ªô Th√™m m·ªõi (Create)
                products.push({ name, price });
                alert("Th√™m s·∫£n ph·∫©m th√†nh c√¥ng!");
            }

            localStorage.setItem(STORAGE_KEY, JSON.stringify(products));
            clearForm();
            loadProducts();
        }

        // 5. CH·ª®C NƒÇNG X√ìA (Delete + Ki·ªÉm th·ª≠ bi√™n)
        function deleteProduct(index) {
            if(confirm("B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a s·∫£n ph·∫©m n√†y kh√¥ng?")) {
                let products = JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]");
                products.splice(index, 1);
                localStorage.setItem(STORAGE_KEY, JSON.stringify(products));
                loadProducts();
            }
        }

        // 6. CH·ª®C NƒÇNG S·ª¨A (ƒê·ªï d·ªØ li·ªáu ng∆∞·ª£c l·∫°i form)
        function editProduct(index) {
            let products = JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]");
            const p = products[index];
            document.getElementById('crud-id').value = index;
            document.getElementById('crud-name').value = p.name;
            document.getElementById('crud-price').value = p.price;
            document.getElementById('btn-save').innerText = "C·∫¨P NH·∫¨T NGAY";
            document.getElementById('crud-name').focus();
        }

        // 7. Reset Form
        function clearForm() {
            document.getElementById('crud-id').value = '';
            document.getElementById('crud-name').value = '';
            document.getElementById('crud-price').value = '';
            document.getElementById('btn-save').innerText = "L∆ØU S·∫¢N PH·∫®M";
        }

        
    </script>
</body>
</html>